name: Database backup

on:
   push:
      branches:
         - db-backup

jobs:
   backup:
      runs-on: ubuntu-latest
      steps:
         -
            uses: actions/checkout@v4
         -
            uses: oven-sh/setup-bun@v2
         -
            uses: cloudflare/wrangler-action@v3
            with:
              apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN_DB_BACKUPS }}
              workingDirectory: "db_backup"
         -
            run: bun db_backup/index.ts
